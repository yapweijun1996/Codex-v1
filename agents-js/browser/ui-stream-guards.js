export function isSyntheticToolPlan(text) {
    if (typeof text !== 'string') return false;
    // This string is generated by buildSyntheticToolPlan() in core.
    return text.startsWith('Thought: I need to use tools to gather required information before answering.')
        && text.includes('\nPlan:\n')
        && text.includes('Action: Calling tool(s) now.');
}

export function shouldSuppressAssistantChunk({ delta, suppressAssistantText }) {
    const alreadySuppressed = Boolean(suppressAssistantText);
    if (alreadySuppressed) {
        return { suppress: true, suppressAssistantText: true };
    }
    if (isSyntheticToolPlan(delta)) {
        return { suppress: true, suppressAssistantText: true };
    }
    return { suppress: false, suppressAssistantText: false };
}

